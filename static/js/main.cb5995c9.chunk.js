(this["webpackJsonpare-we-green-on-azure-yet"]=this["webpackJsonpare-we-green-on-azure-yet"]||[]).push([[0],{27:function(e,t,c){},34:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(1),s=c.n(r),a=c(17),i=c.n(a),o=(c(27),c(6)),u=c(4),l=c(16),d=c(5),j=c(19),b=c(15),h=c(18),f={completed:"check-circle",failed:"times-circle",exception:"exclamation-circle",pending:"spinner",running:"cog"},O={completed:"green",failed:"red",exception:"orange",pending:"gray",running:"darkgray"};var p=function(){var e=Object(r.useState)(!0),t=Object(d.a)(e,2),c=(t[0],t[1]),s=Object(r.useState)(["gecko-t/win7-32-azure","gecko-t/win7-32-gpu-azure","gecko-t/win10-64-azure","gecko-t/win10-64-gpu-azure"]),a=Object(d.a)(s,2),i=a[0],p=(a[1],Object(r.useState)(["cq_jFOOGTryTs8Q3VoO9kg","YAzpJW1sSAaGZ0NKw4tHCw","S8UhCdtwSfS7ciycZFViIQ","QcXaBa22SH6PCWysVYAyCA","IbMJaXOyQy-u4xmXLV4PKw","XsKNeXRwQi6XWcVt7gSoyg"])),g=Object(d.a)(p,2),x=g[0],m=(g[1],Object(r.useState)([])),k=Object(d.a)(m,2),y=k[0],v=k[1],w=Object(r.useState)({}),z=Object(d.a)(w,2),S=z[0],I=z[1];return Object(r.useEffect)((function(){x.forEach((function(e){fetch("https://firefox-ci-tc.services.mozilla.com/api/queue/v1/task-group/".concat(e,"/list")).then((function(e){if(e.ok)return e.json();throw e})).then((function(t){v((function(c){return[].concat(Object(l.a)(c.filter((function(t){return t.taskGroupId!==e}))),Object(l.a)(t.tasks.filter((function(e){return i.includes("".concat(e.task.provisionerId,"/").concat(e.task.workerType))})).map((function(e){return{taskId:e.status.taskId,taskGroupId:e.task.taskGroupId,name:e.task.metadata.name,suite:e.task.metadata.name.split("/")[1],pool:"".concat(e.task.provisionerId,"/").concat(e.task.workerType),state:e.status.state,resolved:e.status.runs&&e.status.runs.length?e.status.runs.slice(-1)[0].resolved:void 0}}))))}))})).catch((function(e){console.error(e)})).finally((function(){c(!1)}))}))}),[x]),Object(r.useEffect)((function(){I((function(e){return Object(u.a)(Object(u.a)({},e),y.reduce((function(e,t){var c=t.suite;return Object(u.a)(Object(u.a)({},e),{},Object(o.a)({},c,i.reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(o.a)({},t,y.filter((function(e){return e.suite===c&&e.pool===t}))))}),{})))}),{}))}))}),[i,y]),Object(n.jsxs)(j.a,{children:[Object(n.jsx)("h1",{className:"text-center",children:"are we green on azure yet?"}),Object(n.jsx)("h2",{className:"text-muted text-center",children:"tl;dr"}),Object(n.jsx)(b.a,{children:Object(n.jsx)("tbody",{children:i.sort().map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"text-right",style:{width:"50%"},children:Object(n.jsx)("h6",{children:e.split("/")[1].replace("-azure","")})}),Object(n.jsx)("td",{style:{width:"50%"},children:Object.keys(S).map((function(t){var c=y.filter((function(c){return c.suite===t&&c.pool===e})).sort((function(e,t){return e.resolved<t.resolved?-1:e.resolved>t.resolved?1:0}));return!!c.length&&"completed"===c.slice(-1)[0].state})).includes(!1)?Object(n.jsx)("h6",{style:{color:"red"},children:"no"}):Object(n.jsx)("h6",{style:{color:"green"},children:"yes"})})]})}))})}),Object(n.jsx)("h2",{className:"text-muted text-center",children:"detail"}),Object(n.jsxs)(b.a,{striped:!0,size:"sm",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:"text-muted text-right",children:"suite"}),i.sort().map((function(e){return Object(n.jsx)("th",{className:"text-muted text-center",children:e.split("/")[1].replace("-azure","")})}))]})}),Object(n.jsx)("tbody",{children:Object.keys(S).sort().map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"text-right",children:e}),i.sort().map((function(t){return Object(n.jsx)("td",{className:"text-center",children:S[e][t].sort((function(e,t){return e.resolved<t.resolved?-1:e.resolved>t.resolved?1:0})).slice(-5).map((function(e){return Object(n.jsx)("a",{href:"https://firefox-ci-tc.services.mozilla.com/tasks/".concat(e.taskId),target:"_blank",title:e.resolved,children:Object(n.jsx)(h.a,{style:{margin:"0 1px"},className:["pending","running"].includes(e.state)?"fa-sm fa-spin":"fa-sm",icon:f[e.state],color:O[e.state]})})}))})}))]})}))})]}),Object(n.jsxs)("p",{children:["the code for this github page is hosted at: ",Object(n.jsx)("a",{href:"https://github.com/mozilla-platform-ops/are-we-green-on-azure-yet",children:"github.com/mozilla-platform-ops/are-we-green-on-azure-yet"}),".",Object(n.jsx)("br",{}),"the work to green up tests is tracked in: ",Object(n.jsx)("a",{href:"https://bugzilla.mozilla.org/show_bug.cgi?id=1676850",children:"bug 1676850"}),".",Object(n.jsx)("br",{})]})]})},g=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,35)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;c(e),n(e),r(e),s(e),a(e)}))},x=(c(33),c(8)),m=c(20),k=c(21);x.b.add(m.a,k.a),i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(p,{})}),document.getElementById("root")),g()}},[[34,1,2]]]);
//# sourceMappingURL=main.cb5995c9.chunk.js.map